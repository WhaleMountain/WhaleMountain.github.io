<!doctype html><html><head><meta charset=utf-8><title>Whale Mountain
</title><meta name=viewport id=viewport content="width=device-width,initial-scale=1"><link rel=icon type=image/x-icon href=https://whalem.net/images/wm.png><link rel=apple-touch-icon href=https://whalem.net/images/wm.png><link rel=stylesheet href=https://whalem.net/scss/style.css><link rel=stylesheet href=https://whalem.net/scss/monokai-sublime.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js></script><link rel=stylesheet href=https://whalem.net/scss/highlight.css><link rel=stylesheet href=https://whalem.net/scss/custom.css><meta name=generator content="Hugo 0.145.0"></head><body><div class=header><div class=site-logo__wrap><div id=site-button><div></div></div><div class=site-logo><a href=https://whalem.net/><img src=https://whalem.net/images/wm.png></a></div></div><div class='site-nav u-font' id=nav-bar><div class=site-nav__wrap><a class=site-nav__el href=/>HOME</a></div><div class=site-nav__wrap><a class=site-nav__el href=/post>POST</a></div><div class=site-nav__wrap><a class=site-nav__el href=/about>ABOUT</a></div><div class=site-nav__wrap><a class=site-nav__el href=/tags/>TAGS</a></div></div></div><div class=main><div class=main-content><div class=main-content__date><h4 id=date>Published on 2024.07.28 16:55</h4><h4 id=date>Edited on 2024.07.28 22:14</h4></div><div class=main-content__title><h1 id=title>久しぶりに更新</h1></div><div class=main-content__article><article id=content><h2 id=久しぶりに更新>久しぶりに更新</h2><p>全然運用していなかったので、ブログを更新できるか確認していた。<br>とりあえずやったことのメモ。</p><h2 id=hugoの確認>Hugoの確認</h2><p>GitHub Pages に移行したときの Hugo のバージョンは <code>0.83.0</code> だったけど、今は <code>0.129.0</code> になってた。<br>とりあえずビルドできるか確認したら、エラーが。。</p><pre><code class=language-shell> parse failed: template: _default/list.html:4: function &quot;sanitizeurl&quot; not defined
</code></pre><p>sanitizeurl がないとのことで代わりのもの探したけどぱっと見見つけられないので、一旦削除で対応 (そんなんでいいのか)<br>baseUrl のシリアライズなので多分問題ないと思いたい。</p><h2 id=github-actionsの更新>GitHub Actionsの更新</h2><p>Yaml ファイルの中身を忘れているけど、まぁ使っているものは色々バージョンは上げとく。</p><ul><li><a href=https://github.com/actions/checkout>actions/checkout</a><ul><li>v2 > v4</li></ul></li><li><a href=https://github.com/peaceiris/actions-hugo>peaceiris/actions-hugo</a><ul><li>v2 > v3</li></ul></li><li><a href=https://github.com/peaceiris/actions-gh-pages>peaceiris/actions-gh-pages</a><ul><li>v3 > v4</li></ul></li></ul><p>あとはDeploy Keyの再設定<br>GitHub Pages 用のリポジトリに <a href=https://docs.github.com/ja/authentication/connecting-to-github-with-ssh/managing-deploy-keys>Deploy keys</a> を登録して、Markdown ファイルを置くリポジトリに Repository secrets を設定する。</p><ul><li>WhaleMountain.github.io<ul><li><code>Settings > Deploy kyes</code> に公開鍵を登録</li></ul></li><li>whalem<ul><li><code>Settings > Secrets and variables > Repository secrets</code> に秘密鍵を登録</li></ul></li></ul><p>鍵は 1Password で管理。あとはブログ更新しなくなったら Deploy keys の登録を削除する。</p></article></div><div class="main-content__tags u-font"><span><a href=https://whalem.net/tags/2024-07>2024-07</a></span>
<span><a href=https://whalem.net/tags/github-pages>GitHub Pages</a></span>
<span><a href=https://whalem.net/tags/github-actions>GitHub Actions</a></span>
<span><a href=https://whalem.net/tags/hugo>Hugo</a></span></div></div><div class=main-profile><div class=main-profile__avatar><img src="https://avatars.githubusercontent.com/u/33239408?s=460&amp;u=e42f33454abd96a2add42e436aa64421a0591d00&amp;v=4"></div><div class=main-profile__body><div class=main-profile__author><span>Whale Mountain</span></div><div class=main-profile__description><p>Tofu on fire :)</p></div></div></div><div class=main-line></div><div class=main-pn><a class=previous href=https://whalem.net/post/2021-05/migrating-mywiki-to-github-pages/><div class=pn-dec></div><div class=pn-els><div class=pn-el__1>2021.05.30 18:54</div><div class=pn-el__2>ラズパイで動かしていたWikiをGitHub Pagesに移行した</div></div></a><a class=next href=https://whalem.net/post/2024-07/hugo-lastmod/><div class=pn-dec></div><div class=pn-els><div class=pn-el__1>2024.07.30 22:12</div><div class=pn-el__2>記事に更新時間の追加</div></div></a></div></div><div class=footer><div class=copyright-wrap><p class="copyright u-font">© 2021 Whale Mountain. Theme yuki. Powered by Hugo.</p></div></div></body><script src=https://whalem.net/js/page.js></script><script>hljs.highlightAll()</script>