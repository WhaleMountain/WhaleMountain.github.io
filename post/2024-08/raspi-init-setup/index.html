<!doctype html><html><head><meta charset=utf-8><title>Whale Mountain
</title><meta name=viewport id=viewport content="width=device-width,initial-scale=1"><link rel=icon type=image/x-icon href=https://whalem.net/images/wm.png><link rel=apple-touch-icon href=https://whalem.net/images/wm.png><link rel=stylesheet href=https://whalem.net/scss/style.css><link rel=stylesheet href=https://whalem.net/scss/monokai-sublime.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/highlight.min.js></script><link rel=stylesheet href=https://whalem.net/scss/highlight.css><link rel=stylesheet href=https://whalem.net/scss/custom.css><meta name=generator content="Hugo 0.144.2"></head><body><div class=header><div class=site-logo__wrap><div id=site-button><div></div></div><div class=site-logo><a href=https://whalem.net/><img src=https://whalem.net/images/wm.png></a></div></div><div class='site-nav u-font' id=nav-bar><div class=site-nav__wrap><a class=site-nav__el href=/>HOME</a></div><div class=site-nav__wrap><a class=site-nav__el href=/post>POST</a></div><div class=site-nav__wrap><a class=site-nav__el href=/about>ABOUT</a></div><div class=site-nav__wrap><a class=site-nav__el href=/tags/>TAGS</a></div></div></div><div class=main><div class=main-content><div class=main-content__date><h4 id=date>Published on &ensp;2024.08.17 16:07</h4></div><div class=main-content__title><h1 id=title>Raspberry Piの初期設定</h1></div><div class=main-content__article><article id=content><p>久しぶりにRaspberry Piを使おうと思ったが初期設定を色々忘れていたので、よく利用する箇所をまとめる。</p><ul><li>使用環境<ul><li>Raspberry Pi 3B+ (多分)</li></ul></li></ul><h3 id=sdカードにイメージを書き込む>SDカードにイメージを書き込む</h3><p><a href=https://www.raspberrypi.com/software/>Raspberry Pi Imager</a> を利用して microSDカードにイメージを書き込みます。<br>GUI は利用しないので Raspberry Pi OS (other) から lite を選択する。あとは初期ユーザー、SSHを有効にして書き込んで終わり。簡単！！</p><h3 id=sudoの初期設定>sudoの初期設定</h3><p>デフォルトだと sudo の実行にパスワードが要求されない。<code>sudoers.d</code> 内にあるファイルを確認すると <code>NOPASSWD</code> が設定されている。</p><ul><li>デフォルトの設定</li></ul><pre><code class=language-shell>$ sudo cat /etc/sudoers.d/010_pi-nopasswd 
[ユーザー] ALL=(ALL) NOPASSWD: ALL
</code></pre><p>対象のファイルを削除して終わり。(中身の書き換えでも良さそう、好みで。)</p><pre><code class=language-shell>$ sudo rm /etc/sudoers.d/010_pi-nopasswd
</code></pre><h3 id=無線関連の設定>無線関連の設定</h3><p>有線で利用することが多いので Wi-Fi は無効にする。あと Bluetooth も利用しないので無効にする。<br><code>/boot/overlays/README</code> を見てフラグを確認して下記ファイルに書き込む。</p><ul><li>/boot/firmware/config.txt</li></ul><pre><code>dtoverlay=disable-bt
dtoverlay=disable-wifi
</code></pre><p>再起動後に <code>ip a</code> で <code>wlan0</code> が表示されないことを確認する。</p><h3 id=ipアドレスの設定>IPアドレスの設定</h3><p>Raspberry Pi OS 12(Bookworm) から NetworkManager で設定するらしい。下記サイトを参考にIPアドレスを固定しました。</p><ul><li>参考: <a href=https://hassiweb.gitlab.io/memo/docs/memo/raspberry-pi/raspberry-pi-os/network-config/>Raspberry Pi OS のネットワーク設定</a></li></ul><pre><code class=language-shell>$ sudo nmcli connection modify 'Wired connection 1' ipv4.addresses &quot;[IPアドレス/サブネット]&quot; ipv4.gateway &quot;[ゲートウェイ]&quot; ipv4.dns &quot;[DNS]&quot; ipv4.method &quot;manual&quot;
</code></pre><p>DNSを複数設定するには <code>ipv4.dns "8.8.8.8,8.8.4.4"</code> みたいに指定したら設定できました。</p><h3 id=その他諸々>その他諸々</h3><p>必要なパッケージのインストール</p><pre><code class=language-shell>$ sudo apt install vim zsh git
</code></pre><p>デフォルトエディターの変更</p><pre><code class=language-shell>$ sudo update-alternatives --config editor
</code></pre><p>Docker のインストールは過去の記事を参考にする。</p><ul><li><a href=/post/2021-03/docker-on-raspberrypi/>Raspberry PiにDocker環境のインストール</a></li></ul></article></div><div class="main-content__tags u-font"><span><a href=https://whalem.net/tags/2024-08>2024-08</a></span>
<span><a href=https://whalem.net/tags/raspberry-pi>Raspberry Pi</a></span></div></div><div class=main-profile><div class=main-profile__avatar><img src="https://avatars.githubusercontent.com/u/33239408?s=460&amp;u=e42f33454abd96a2add42e436aa64421a0591d00&amp;v=4"></div><div class=main-profile__body><div class=main-profile__author><span>Whale Mountain</span></div><div class=main-profile__description><p>Tofu on fire :)</p></div></div></div><div class=main-line></div><div class=main-pn><a class=previous href=https://whalem.net/post/2024-08/update-highlightjs/><div class=pn-dec></div><div class=pn-els><div class=pn-el__1>2024.08.12 19:38</div><div class=pn-el__2>Highlight.jsのアップデート</div></div></a><a class=next href=https://whalem.net/post/2025-02/adgurd-home-setup/><div class=pn-dec></div><div class=pn-els><div class=pn-el__1>2025.02.24 21:03</div><div class=pn-el__2>AdGuard Homeの導入</div></div></a></div></div><div class=footer><div class=copyright-wrap><p class="copyright u-font">© 2021 Whale Mountain. Theme yuki. Powered by Hugo.</p></div></div></body><script src=https://whalem.net/js/page.js></script><script>hljs.highlightAll()</script>