<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Drone on Whale Mountain</title>
    <link>http://whalem.net/tags/drone/</link>
    <description>Recent content in Drone on Whale Mountain</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>jp</language>
    <copyright>© 2021 Whale Mountain. Theme yuki. Powered by Hugo.</copyright>
    <lastBuildDate>Wed, 10 Mar 2021 12:58:54 +0900</lastBuildDate><atom:link href="http://whalem.net/tags/drone/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>DroneのカスタムDNS設定</title>
      <link>http://whalem.net/post/2021-03/drone-network-setting/</link>
      <pubDate>Wed, 10 Mar 2021 12:58:54 +0900</pubDate>
      
      <guid>http://whalem.net/post/2021-03/drone-network-setting/</guid>
      <description>自宅の環境でGitea/Droneを構築していたが、CI時にGiteaからリポジトリをCloneできない。ドメインに接続できないと。自宅のLANからWAN側のIPにはアクセスできないので、内部DNSとしてUnboundを構築した。
Initialized empty Git repository in /drone/src/.git/ + git fetch origin +refs/heads/master: fatal: unable to access &#39;http://gitea.whalem.net/whalem/drone_ci_test.git/&#39;: Failed to connect to gitea.whalem.net port 80: Operation timed out DNSを構築したので、Drone Runnerへ設定したが、同じようにFailed to connect to gitea.whalem.net port 80: Operation timed outとなる。Pingしてみると。
+ ping -c 4 gitea.whalem.net PING gitea.whalem.net (&amp;lt;WAN_IP&amp;gt;): 56 data bytes 64 bytes from &amp;lt;WAN_IP&amp;gt;: seq=0 ttl=254 time=0.890 ms あらら。Runnerに設定したけど、Pipelineの処理は別コンテナが作成され実行されるので、Runnerに設定しても意味ないと。Droneが作成するコンテナへDNSの設定方法を調べたけど、あまり良さそうな解決策は見つからなかったので、下の方法をとる。
 Specify a host or a custom dns in drone-git image  /etc/docker/daemon.</description>
    </item>
    
  </channel>
</rss>
